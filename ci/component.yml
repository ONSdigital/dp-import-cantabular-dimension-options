---

platform: linux

image_resource:
  type: docker-image
  source:
    repository: amidos/dcind
    tag: latest

inputs:
  - name: dp-import-cantabular-dimension-options

run:
  path: bash
  args:
    - -exc
    - |
      source /docker-lib.sh
      start_docker

      # Load docker images
      docker load -i wurstmeister/zookeeper
      docker tag "$(cat zookeeper/image-id)" "$(cat zookeeper/repository):$(cat zookeeper/tag)"
      docker load -i wurstmeister/kafka
      docker tag "$(cat kafka/image-id)" "$(cat kafka/repository):$(cat kafka/tag)"
      docker images

      # Run component scrip
      dp-import-cantabular-dimension-options/ci/scripts/component.sh

caches:
  - path: /var/run/docker.sock
